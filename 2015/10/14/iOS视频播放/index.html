<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="音频," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="离上一篇博客发布又是两周时间过去了，心里总是感觉空空的。两周没有发布一篇博客，感觉就像是虚度了。另外一个原因就是实在是不知道写点什么，有些内容兴趣不大就搁置了。其次就是之前的天坑真是没有动力去填了，比如CoreData，就放在那吧。上篇博客也提到了这篇做视频播放器，所以这篇就是讲讲视频播放器的。
上篇博客也提到了一些资源：
iOS开发系列–音频播放、录音、视频播放、拍照、视频录制iOS音频播放 (">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS视频播放">
<meta property="og:url" content="http://lynchwong.com/2015/10/14/iOS视频播放/index.html">
<meta property="og:site_name" content="Nobodyknows+ 2.0">
<meta property="og:description" content="离上一篇博客发布又是两周时间过去了，心里总是感觉空空的。两周没有发布一篇博客，感觉就像是虚度了。另外一个原因就是实在是不知道写点什么，有些内容兴趣不大就搁置了。其次就是之前的天坑真是没有动力去填了，比如CoreData，就放在那吧。上篇博客也提到了这篇做视频播放器，所以这篇就是讲讲视频播放器的。
上篇博客也提到了一些资源：
iOS开发系列–音频播放、录音、视频播放、拍照、视频录制iOS音频播放 (">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/1.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/2.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/3.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/4.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/5.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/6.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/7.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/8.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/9.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/10.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/11.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/12.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/13.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/14.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/15.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/16.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/17.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/18.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/19.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/20.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/21.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/22.png">
<meta property="og:image" content="http://lynchwong.com/img/iOSLWPlayer/23.png">
<meta property="og:updated_time" content="2016-06-01T11:52:23.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS视频播放">
<meta name="twitter:description" content="离上一篇博客发布又是两周时间过去了，心里总是感觉空空的。两周没有发布一篇博客，感觉就像是虚度了。另外一个原因就是实在是不知道写点什么，有些内容兴趣不大就搁置了。其次就是之前的天坑真是没有动力去填了，比如CoreData，就放在那吧。上篇博客也提到了这篇做视频播放器，所以这篇就是讲讲视频播放器的。
上篇博客也提到了一些资源：
iOS开发系列–音频播放、录音、视频播放、拍照、视频录制iOS音频播放 (">
<meta name="twitter:image" content="http://lynchwong.com/img/iOSLWPlayer/1.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> iOS视频播放 | Nobodyknows+ 2.0 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Nobodyknows+ 2.0</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">iOS、Go</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                iOS视频播放
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-14T18:18:18+08:00" content="2015-10-14">
              2015-10-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/14/iOS视频播放/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/14/iOS视频播放/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
              &nbsp; | &nbsp;
              <span class="page-pv"><i class="fa fa-file-o"></i>
              <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>离上一篇博客发布又是两周时间过去了，心里总是感觉空空的。两周没有发布一篇博客，感觉就像是虚度了。另外一个原因就是实在是不知道写点什么，有些内容兴趣不大就搁置了。其次就是之前的天坑真是没有动力去填了，比如CoreData，就放在那吧。上篇博客也提到了这篇做视频播放器，所以这篇就是讲讲视频播放器的。</p>
<p>上篇博客也提到了一些资源：</p>
<p><a href="http://www.cnblogs.com/kenshincui/p/4186022.html" target="_blank" rel="external">iOS开发系列–音频播放、录音、视频播放、拍照、视频录制</a><br><a href="http://msching.github.io/blog/2014/07/07/audio-in-ios/" target="_blank" rel="external">iOS音频播放 (一)：概述</a><br><a href="https://developer.apple.com/library/ios/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html" target="_blank" rel="external">AVFoundation Programming Guide</a></p>
<p>第一个资源基本所有的东西都讲到了，音频、视频等。简单易懂，入门级学习都够了，也能满足基本的需求。<br>第二个资源主要讲解音频的，很专业。<br>第三个资源是苹果官方的编程指南，具有很好的指导意义，建议大家阅读。</p>
<p>其实基本知识点前面的这些资源都讲到了，我这里再讲也就没什么意思了。</p>
<p>所以我们这里就做一个完整功能的播放器，播放，暂停，快进，全屏等功能。</p>
<p>接下来我们就开始吧，先说下我的开发环境。</p>
<ul>
<li>OS X EI Capitan(Version 10.11)</li>
<li>Xcode(Version 7.0.1)</li>
<li>使用Swift作为开发语言</li>
</ul>
<h1 id="建立项目"><a href="#建立项目" class="headerlink" title="建立项目"></a>建立项目</h1><p>如下图所示，我们选择<em>Single View Application</em>，项目名称叫做<em>LWPlayer</em>，语言选择<em>Swift</em>。<br><img src="/img/iOSLWPlayer/1.png" alt="alt text"></p>
<p><img src="/img/iOSLWPlayer/2.png" alt="alt text"></p>
<p>然后我们将项目的<em>Deployment Target</em>修改为8.0。然后我们删除<em>Main.storyboard</em>文件，同时<em>Main Interface</em>里面的Main也去掉。因为我们删除了storyboard文件，如果不删除Main的话程序无法启动直接崩溃。</p>
<p>现在项目的界面应该如下所示：</p>
<p><img src="/img/iOSLWPlayer/3.png" alt="alt text"></p>
<p>这里我们删除了storyboard文件，我的打算是用代码手写界面，不使用storyboard和xib文件。大家可能都知道用代码写布局很繁琐，所以这里使用第三方的框架<em>SnapKit</em>。这个第三方框架其实就是OC版本的<em>Masonry</em>，这里就不细讲布局的事情了，参考资料<a href="https://github.com/SnapKit/Masonry" target="_blank" rel="external"> SnapKit </a>和<a href="https://github.com/SnapKit/Masonry" target="_blank" rel="external"> Masonry </a>。</p>
<p>现在项目编译运行之后就是一片漆黑，之后我们要自己做一些初始化的工作。首先我们先添加第三方库，及<em>SnapKit</em>。我们使用依赖管理器来添加第三方库。可以使用<em>CocoaPods</em>，当然你也可以使用<em>Carthage</em>，如果是Swift以及iOS8.0以上推荐使用<em>Carthage</em>来管理。这里我们使用<em>Carthage</em>，<a href="https://github.com/Carthage/Carthage#adding-frameworks-to-an-application" target="_blank" rel="external"> Carthage </a>，安装很简单，请自行了解。</p>
<p><em>Carthage</em>的参考资料：</p>
<p><a href="https://github.com/Carthage/Carthage#adding-frameworks-to-an-application" target="_blank" rel="external">Carthage</a><br><a href="http://www.cocoachina.com/ios/20141204/10528.html" target="_blank" rel="external">Carthage：去中心化的Cocoa依赖管理器</a><br><a href="http://www.isaced.com/post-265.html" target="_blank" rel="external">Cocoa 新的依赖管理工具：Carthage</a></p>
<p>第一篇是官方的，第二篇相当于是官方的翻译，大家自行参考学习。</p>
<p>我们进入到项目目录执行如下命令，截图如下：</p>
<p><img src="/img/iOSLWPlayer/4.png" alt="alt text"></p>
<p>进入到项目目录后我们创建了<em>Cartfile</em>文件，然后在里面添加需要的第三方库。如下所示：</p>
<p><img src="/img/iOSLWPlayer/5.png" alt="alt text"></p>
<p>然后<em>:wq</em>保存退出，然后执行<em>carthage update</em>命令进行安装编译。</p>
<p>这里就算是安装编译完成了，我们可以进到工程目录里面看下编程生成的二进制framework文件。如下图所示：</p>
<p><img src="/img/iOSLWPlayer/6.png" alt="alt text"></p>
<p>不仅有iOS的，还有Mac的。现在我们还差最后一步，就是将framework添加到我们的工程。设置<em>Framework Search Paths</em>是最简单的方法，告诉工程到那里去找这些framework。设置为<em>$(SRCROOT)/Carthage/Build/iOS</em>，如果是OS X就把iOS改成Mac。如下所示：</p>
<p><img src="/img/iOSLWPlayer/7.png" alt="alt text"></p>
<p>这一步和官方说明的不一样，按照官方的方法，每次添加了新的framework都要自己到Xcode里面进行手动添加。</p>
<p>第三方库算是添加完成了，现在我们要修改<em>AppDelegate</em>文件。修改<em>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool</em>方法如下：</p>
<pre><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {
    // Override point for customization after application launch.

    //appearance
    UINavigationBar.appearance().barTintColor = UIColor(red: 56.0/255.0, green: 62.0/255.0, blue: 72.0/255.0, alpha: 1.0)
    UINavigationBar.appearance().tintColor = UIColor.whiteColor()

    //rootViewController
    let rootVC = ViewController()

    window = UIWindow(frame: UIScreen.mainScreen().bounds)
    window!.rootViewController = rootVC
    window?.makeKeyAndVisible()

    return true
}
</code></pre><p>这里代码很简单，就不讲解了。运行启动后屏幕仍然是黑的，我们继续做些修改。将<em>ViewController</em>的代码修改为如下所示：</p>
<pre><code>import UIKit
import SnapKit

class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.
        view.backgroundColor = UIColor.whiteColor()

        let aView = UIView()
        aView.backgroundColor = UIColor.orangeColor()
        view.addSubview(aView)

        aView.snp_makeConstraints { (make) -&gt; Void in
            make.edges.equalTo(view).offset(UIEdgeInsets(top: 10, left: 10, bottom: -10, right: -10))
        }
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }


}
</code></pre><p>我们首先导入<em>SnapKit</em>模块，然后修改视图的背景色为白色，然后添加了一个距离父视图编剧为10的橙色子视图。布局的代码，<em>SnapKit</em>的使用方法就不讲解了。</p>
<p>编译运行后会发现如下错误，</p>
<p><img src="/img/iOSLWPlayer/8.png" alt="alt text"></p>
<p>这里是因为之前修改<em>Framework Search Paths</em>导致的，其实前面的这一步貌似并没有效果。所以我们还是得按照官方的来，如下所示：</p>
<p><img src="/img/iOSLWPlayer/9.png" alt="alt text"></p>
<p>我们在<em>Embedded Binaries</em>这里将<em>Carthage/Build/iOS/SnapKit.framework</em>添加进来，然后编译运行，截图如下：</p>
<p><img src="/img/iOSLWPlayer/10.png" alt="alt text"></p>
<h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><p>首先我们删除<em>ViewController</em>，新建<em>LWPlayerViewController</em>，代码如下：</p>
<pre><code>import UIKit
import SnapKit

class LWPlayerViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()

        // Do any additional setup after loading the view.
        let aView = UIView();
        aView.backgroundColor = UIColor.orangeColor();
        view.addSubview(aView)

        aView.snp_makeConstraints { (make) -&gt; Void in
            make.edges.equalTo(view)
        }
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }

}
</code></pre><p>很简单就不讲解了，同时我们还需要修改<em>AppDelegate</em>的<em>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool</em>方法，代码如下：</p>
<pre><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {
    // Override point for customization after application launch.

    //appearance
    UINavigationBar.appearance().barTintColor = UIColor(red: 56.0/255.0, green: 62.0/255.0, blue: 72.0/255.0, alpha: 1.0)
    UINavigationBar.appearance().tintColor = UIColor.whiteColor()

    //rootViewController
    let rootVC = LWPlayerViewController()

    window = UIWindow(frame: UIScreen.mainScreen().bounds)
    window!.rootViewController = rootVC
    window?.makeKeyAndVisible()

    return true
}
</code></pre><p>运行后截图如下：</p>
<p><img src="/img/iOSLWPlayer/11.png" alt="alt text"></p>
<p>你可能发现我们设置了导航栏的外观，所以我们接下来就新建<em>LWNavigationController</em>继承自<em>UINavigationController</em>，代码如下：</p>
<pre><code>import UIKit

class LWNavigationController: UINavigationController {

    override init(rootViewController: UIViewController) {
        super.init(rootViewController: rootViewController)
    }

    override init(nibName nibNameOrNil: String?, bundle nibBundleOrNil: NSBundle?) {
        super.init(nibName: nibNameOrNil, bundle: nibBundleOrNil)
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError(&quot;init(coder:) has not been implemented&quot;)
    }

    override func viewDidLoad() {
        super.viewDidLoad()

        // Do any additional setup after loading the view.
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }

    // MARK: - StatusBar

    override func preferredStatusBarStyle() -&gt; UIStatusBarStyle {
        return UIStatusBarStyle.LightContent
    }

}
</code></pre><p>这里的代码也没什么好讲解的，主要就是一些初始化方法，有些是必需的，没有会报错。之后我们修改<em>AppDelegate</em>，首先添加：</p>
<pre><code>var navigationVC: LWNavigationController!
</code></pre><p>的属性，然后修改<em>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool</em>方法：</p>
<pre><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {
    // Override point for customization after application launch.

    //appearance
    UINavigationBar.appearance().barTintColor = UIColor(red: 56.0/255.0, green: 62.0/255.0, blue: 72.0/255.0, alpha: 1.0)
    UINavigationBar.appearance().tintColor = UIColor.whiteColor()

    //rootViewController
    let rootVC = LWPlayerViewController()
    navigationVC = LWNavigationController(rootViewController: rootVC)

    window = UIWindow(frame: UIScreen.mainScreen().bounds)
    window!.rootViewController = navigationVC
    window?.makeKeyAndVisible()

    return true
}
</code></pre><p>运行后模拟器截图：</p>
<p><img src="/img/iOSLWPlayer/12.png" alt="alt text"></p>
<h1 id="视频资源"><a href="#视频资源" class="headerlink" title="视频资源"></a>视频资源</h1><p>说来惭愧，没有在网上找到可以用来进行远程播放的视频资源，所以我们要自己弄个。使用<strong>CocoaHTTPServer</strong>第三方库，让App内嵌一个HTTP server。</p>
<p><a href="https://github.com/viki-org/VKVideoPlayer" target="_blank" rel="external">VKVideoPlayer</a></p>
<p>这里有一个开源的播放器，功能很完善，包括加载字幕、广告等等，大家可以参考学习下。</p>
<p>这里我们先来添加第三方库<strong>CocoaHTTPServer</strong>，前面我们使用的是Carthage来管理依赖的，貌似 这个第三方库不行。但是CocoaPods可以，但是我们这里就不使用CocoaPods，估计这里是可以用的，这两个依赖管理应该不会冲突，这里我们就不测试了，直接使用最原始的方法：拖放文件。</p>
<p><a href="https://github.com/robbiehanson/CocoaHTTPServer" target="_blank" rel="external">CocoaHTTPServer</a> ，这里是下载地址，下载完成后我们将<strong>Core</strong>，<strong>Extensions</strong>，<strong>Vendor</strong>放到新建的文件夹<strong>CocoaHTTPServer</strong>中，其他的东西我们不需要了。然后将这个文件夹拖放到工程中，如下图所示：</p>
<p><img src="/img/iOSLWPlayer/13.png" alt="alt text"></p>
<p>接下来我们添加<strong>libxml2.tbd</strong>，不添加会报找不到文件的错。添加后如下图所示。</p>
<p><img src="/img/iOSLWPlayer/14.png" alt="alt text"></p>
<p>因为这个第三方库是OC，如果要混编的话我们需要添加桥接头文件，<strong>LWPlayer-Bridging-Header.h</strong>。修改文件内容的代码如下：</p>
<pre><code>#import &quot;HTTPServer.h&quot;
</code></pre><p>然后我们还要配置下头文件，如下所示：</p>
<p><img src="/img/iOSLWPlayer/15.png" alt="alt text"></p>
<p>然后我们参考<a href="https://github.com/viki-org/VKVideoPlayer" target="_blank" rel="external"> VKVideoPlayer </a>的<strong>HTTPStreamingServer</strong>，代码如下：</p>
<pre><code>import UIKit

let HTTPStreamingServerSingleton = HTTPStreamingServer()

class HTTPStreamingServer: NSObject {

    var httpServer: HTTPServer!

    class var sharedInstance: HTTPStreamingServer {
        get {
            return HTTPStreamingServerSingleton
        }
    }

    override init() {
        super.init()
        initialize()
    }

    func initialize() {
        httpServer = HTTPServer()
        httpServer.setType(&quot;_http._tcp.&quot;)
        httpServer.setPort(12345)
        let webPath = NSBundle.mainBundle().resourcePath?.stringByAppendingString(&quot;/web&quot;)
        httpServer.setDocumentRoot(webPath)
    }

    func start() {
        do {
            try httpServer.start()
            print(&quot;Started HTTP Server on port \(httpServer.listeningPort())&quot;)
        } catch {
            print(&quot;Error starting HTTP Server&quot;)
        }
    }

    func stop() {
        httpServer.stop()
    }

}
</code></pre><p>定义了一个全局的常量，然后使用类计算型属性实现单列。其他的代码很简单，就不讲解了。</p>
<p>然后我们在<strong>func applicationDidBecomeActive(application: UIApplication)</strong>方法中加入<strong>HTTPStreamingServer.sharedInstance.start()</strong>及<strong>func applicationWillTerminate(application: UIApplication)</strong>方法中添加<strong>HTTPStreamingServer.sharedInstance.stop()</strong>，运行之后在控制台输出<strong>Started HTTP Server on port 12345</strong>。</p>
<p>然后我们将一些视频资源拖到项目中，这里我们就用<strong>VKVideoPlayer</strong>的资源，将<strong>web</strong>这个文件夹拖到我们项目中，注意我截图中的箭头，如下所示：</p>
<p><img src="/img/iOSLWPlayer/16.png" alt="alt text"></p>
<h1 id="播放器"><a href="#播放器" class="headerlink" title="播放器"></a>播放器</h1><p>新建一个类<strong>LWPlayerView</strong>继承自<strong>UIView</strong>，代码如下：</p>
<pre><code>import UIKit
import AVFoundation

class LWPlayerView: UIView {

    var player: AVPlayer {
        set {
            (layer as! AVPlayerLayer).player = newValue
        }
        get {
            return (layer as! AVPlayerLayer).player!
        }
    }

    override class func layerClass() -&gt; AnyClass {
        return AVPlayerLayer.classForCoder()
    }

}
</code></pre><p>如果你看过苹果的编程指南或者苹果给的Demo，都是这样实现的，可以算是最佳实践吧。</p>
<p>接下来我们就来实现播放器，到<strong>LWPlayerViewController</strong>。首先我们添加如下所示的属性：</p>
<pre><code>let videoPath = &quot;http://localhost:12345/wifi_640_index.m3u8&quot;//视频播放地址
let radio = CGFloat(375.0 / 238.0)//缩放比例
let width = UIScreen.mainScreen().bounds.size.width//屏幕宽度

let playContentView = UIView()//播放器容器视图
let toolContentView = UIView()//播放器工具容器视图

var player: AVPlayer!//播放器
var playerView = LWPlayerView()//播放视图

var hideTool = false
</code></pre><p>后面都有注释，最后一个属性用来表示是否隐藏状态栏和工具栏。然后我们添加初始化播放器的方法：</p>
<pre><code>func initPlayer() {
    let url = NSURL(string: videoPath)!
    let playerItem = AVPlayerItem(URL: url)
    player = AVPlayer(playerItem: playerItem)
}
</code></pre><p>然后是初始化视图的方法：</p>
<pre><code>func initView() {

    playContentView.backgroundColor = UIColor.blackColor()
    view.addSubview(playContentView)
    playContentView.snp_makeConstraints { (make) -&gt; Void in
        make.top.left.right.equalTo(view)
        make.width.equalTo(playContentView.snp_height).multipliedBy(radio)
    }

    playerView.player = player
    playerView.addGestureRecognizer(UITapGestureRecognizer(target: self, action: Selector(&quot;sigleTapAction&quot;)))
    playContentView.addSubview(playerView)
    playerView.snp_makeConstraints { (make) -&gt; Void in
        make.edges.equalTo(playContentView)
    }

    toolContentView.backgroundColor = UIColor(red: 56.0/255.0, green: 62.0/255.0, blue: 72.0/255.0, alpha: 1.0)
    playContentView.addSubview(toolContentView)
    toolContentView.snp_makeConstraints { (make) -&gt; Void in
        make.left.bottom.right.equalTo(playContentView)
        make.height.equalTo(30.0)
    }
}
</code></pre><p>然后我们实现<strong>sigleTapAction()</strong>方法：</p>
<pre><code>func sigleTapAction() {
    if hideTool {
        hideTool = false
        navigationController?.navigationBar.hidden = false
        toolContentView.hidden = false
    } else {
        hideTool = true
        navigationController?.navigationBar.hidden = true
        toolContentView.hidden = true
    }
}
</code></pre><p>然后修改<strong>func viewDidLoad()</strong>方法，当点击的时候会隐藏状态栏和工具栏：</p>
<pre><code>override func viewDidLoad() {
    super.viewDidLoad()
    view.backgroundColor = UIColor.whiteColor()
    initPlayer()
    initView()
    player.play()
}
</code></pre><p>运行后截图如下：</p>
<p><img src="/img/iOSLWPlayer/17.png" alt="alt text"></p>
<p>大家都知道HTTP请求在iOS9里面有变化，所以有的同学可能没有看到视频播放的画面；同样的<strong>VKVideoPlayer</strong>你可能也看不到视频播放，都是相同的原因，大家搜索都能解决。设置下<strong>.plist</strong>文件就可以了，如下图所示：</p>
<p><img src="/img/iOSLWPlayer/18.png" alt="alt text"></p>
<p>注意这两个字段的类型，一个是字典类型，一个是布尔类型。</p>
<h2 id="播放器界面"><a href="#播放器界面" class="headerlink" title="播放器界面"></a>播放器界面</h2><p>接下来我们就来完成播放器的界面，让它开起来更像一个播放器。首先我们添加如下所示的属性：</p>
<pre><code>let playButton = UIButton()//播放按钮
let muteButton = UIButton()//静音按钮
let progress = UISlider()//播放进度
let srtsButton = UIButton()//字幕按钮
let fullButton = UIButton()//全屏按钮
</code></pre><p>接下来我们就来布局这些按钮，修改<strong>initView()</strong>方法，代码如下，直接替换即可：</p>
<pre><code>func initView() {

    playContentView.backgroundColor = UIColor.blackColor()
    view.addSubview(playContentView)
    playContentView.snp_makeConstraints { (make) -&gt; Void in
        make.top.left.right.equalTo(view)
        make.width.equalTo(playContentView.snp_height).multipliedBy(radio)
    }

    playerView.player = player
    playerView.addGestureRecognizer(UITapGestureRecognizer(target: self, action: Selector(&quot;sigleTapAction&quot;)))
    playContentView.addSubview(playerView)
    playerView.snp_makeConstraints { (make) -&gt; Void in
        make.edges.equalTo(playContentView)
    }

    toolContentView.backgroundColor = UIColor(red: 56.0/255.0, green: 62.0/255.0, blue: 72.0/255.0, alpha: 1.0)
    playContentView.addSubview(toolContentView)
    toolContentView.snp_makeConstraints { (make) -&gt; Void in
        make.left.bottom.right.equalTo(playContentView)
        make.height.equalTo(30.0)
    }

    playButton.setImage(UIImage(named: &quot;pause_icon_vertical&quot;), forState: UIControlState.Normal)
    playButton.setImage(UIImage(named: &quot;play_icon_vertical&quot;), forState: UIControlState.Selected)
    muteButton.setImage(UIImage(named: &quot;sound_on_vertical&quot;), forState: UIControlState.Normal)
    muteButton.setImage(UIImage(named: &quot;sound_off_vertical&quot;), forState: UIControlState.Selected)
    srtsButton.setImage(UIImage(named: &quot;chinese_english_shift_vertical&quot;), forState: UIControlState.Normal)
    srtsButton.setImage(UIImage(named: &quot;english_shift_vertical&quot;), forState: UIControlState.Selected)
    fullButton.setImage(UIImage(named: &quot;full_screen_icon_vertical&quot;), forState: UIControlState.Normal)

    progress.minimumValue = 0.0
    progress.maximumValue = 1.0
    progress.continuous = false
    progress.setThumbImage(UIImage(named: &quot;VKScrubber_thumb_vertical&quot;), forState: UIControlState.Normal)
    progress.value = 0.0
    progress.minimumTrackTintColor = UIColor(red: 10 / 255, green: 137 / 255, blue: 153 / 255, alpha: 1.0)
    progress.maximumTrackTintColor = UIColor(red: 10 / 255, green: 137 / 255, blue: 153 / 255, alpha: 0.4)

    playButton.addTarget(self, action: Selector(&quot;playAction:&quot;), forControlEvents: UIControlEvents.TouchUpInside)
    muteButton.addTarget(self, action: Selector(&quot;muteAction:&quot;), forControlEvents: UIControlEvents.TouchUpInside)
    srtsButton.addTarget(self, action: Selector(&quot;srtsAction:&quot;), forControlEvents: UIControlEvents.TouchUpInside)
    fullButton.addTarget(self, action: Selector(&quot;fullAction:&quot;), forControlEvents: UIControlEvents.TouchUpInside)

    toolContentView.addSubview(playButton)
    toolContentView.addSubview(muteButton)
    toolContentView.addSubview(progress)
    toolContentView.addSubview(srtsButton)
    toolContentView.addSubview(fullButton)

    playButton.snp_makeConstraints { (make) -&gt; Void in
        make.left.equalTo(10.0)
        make.centerY.equalTo(toolContentView.snp_centerY)
        make.height.width.equalTo(20.0)
    }

    muteButton.snp_makeConstraints { (make) -&gt; Void in
        make.left.equalTo(playButton.snp_right).offset(13.0)
        make.centerY.equalTo(toolContentView.snp_centerY)
        make.height.width.equalTo(20.0)
    }

    progress.snp_makeConstraints { (make) -&gt; Void in
        make.left.equalTo(muteButton.snp_right).offset(22.0)
        make.right.equalTo(srtsButton.snp_left).offset(-16.0)
        make.centerY.equalTo(toolContentView.snp_centerY)
        make.height.equalTo(2.0)
    }

    srtsButton.snp_makeConstraints { (make) -&gt; Void in
        make.right.equalTo(fullButton.snp_left).offset(-14.0)
        make.centerY.equalTo(toolContentView.snp_centerY)
        make.height.width.equalTo(20.0)
    }

    fullButton.snp_makeConstraints { (make) -&gt; Void in
        make.right.equalTo(-10.0)
        make.centerY.equalTo(toolContentView.snp_centerY)
        make.height.width.equalTo(20.0)
    }
}
</code></pre><p>代码很长，但是基本没有难点，大都是布局的代码，这里就不讲解了。然后我们添加按钮相应的Action：</p>
<pre><code>func playAction(sender: UIButton) {
    if player.rate == 0 {
        player.play()
        sender.selected = true
    } else {
        player.pause()
        sender.selected = false
    }
}

func muteAction(sender: UIButton) {
    if player.muted {
        player.muted = false
        sender.selected = false
    } else {
        player.muted = true
        sender.selected = true
    }
}

func srtsAction(sender: UIButton) {

}

func fullAction(sender: UIButton) {

}
</code></pre><p>然后我们将<strong>viewDidLoad()</strong>方法里面的播放的代码<strong>player.play()</strong>去掉，运行之后截图如下：</p>
<p><img src="/img/iOSLWPlayer/19.png" alt="alt text"></p>
<h2 id="强制横屏"><a href="#强制横屏" class="headerlink" title="强制横屏"></a>强制横屏</h2><p>首先我们修改横屏按钮要调用的方法，代码如下：</p>
<pre><code>func fullAction(sender: UIButton) {
    UIDevice.currentDevice().setValue(NSNumber(integer: UIInterfaceOrientation.LandscapeRight.rawValue), forKey: &quot;orientation&quot;)
    UIViewController.attemptRotationToDeviceOrientation()
}
</code></pre><p>接下来就是要调整下横屏时的视图，代码如下：</p>
<pre><code>override func willRotateToInterfaceOrientation(toInterfaceOrientation: UIInterfaceOrientation, duration: NSTimeInterval) {
    if UIInterfaceOrientationIsLandscape(toInterfaceOrientation) {
        playContentView.snp_remakeConstraints { (make) -&gt; Void in
            make.edges.equalTo(view)
        }

        toolContentView.snp_remakeConstraints { (make) -&gt; Void in
            make.left.bottom.right.equalTo(playContentView)
            make.height.equalTo(52.0)
        }

        playButton.setImage(UIImage(named: &quot;pause_icon_landscape&quot;), forState: UIControlState.Normal)
        playButton.setImage(UIImage(named: &quot;play_icon_landscape&quot;), forState: UIControlState.Selected)
        muteButton.setImage(UIImage(named: &quot;sound_on_landscape&quot;), forState: UIControlState.Normal)
        muteButton.setImage(UIImage(named: &quot;sound_off_landscape&quot;), forState: UIControlState.Selected)
        srtsButton.setImage(UIImage(named: &quot;chinese_english_shift_landscape&quot;), forState: UIControlState.Normal)
        srtsButton.setImage(UIImage(named: &quot;english_shift_landscape&quot;), forState: UIControlState.Selected)
        fullButton.setImage(UIImage(named: &quot;full_screen_icon_landscape&quot;), forState: UIControlState.Normal)
        progress.setThumbImage(UIImage(named: &quot;VKScrubber_thumb_landscape&quot;), forState: UIControlState.Normal)

        playButton.snp_remakeConstraints { (make) -&gt; Void in
            make.left.equalTo(25.0)
            make.centerY.equalTo(toolContentView.snp_centerY)
            make.height.width.equalTo(24.0)
        }

        muteButton.snp_remakeConstraints { (make) -&gt; Void in
            make.left.equalTo(playButton.snp_right).offset(32.0)
            make.centerY.equalTo(toolContentView.snp_centerY)
            make.height.width.equalTo(24.0)
        }

        progress.snp_remakeConstraints { (make) -&gt; Void in
            make.left.equalTo(muteButton.snp_right).offset(30.0)
            make.right.equalTo(srtsButton.snp_left).offset(-31.0)
            make.centerY.equalTo(toolContentView.snp_centerY)
            make.height.equalTo(4.0)
        }

        srtsButton.snp_remakeConstraints { (make) -&gt; Void in
            make.right.equalTo(fullButton.snp_left).offset(-26.0)
            make.centerY.equalTo(toolContentView.snp_centerY)
            make.height.width.equalTo(24.0)
        }

        fullButton.snp_remakeConstraints { (make) -&gt; Void in
            make.right.equalTo(-27.0)
            make.centerY.equalTo(toolContentView.snp_centerY)
            make.height.width.equalTo(24.0)
        }
    } else {
        playContentView.snp_remakeConstraints { (make) -&gt; Void in
            make.top.left.right.equalTo(view)
            make.width.equalTo(playContentView.snp_height).multipliedBy(radio)
        }

        toolContentView.snp_remakeConstraints { (make) -&gt; Void in
            make.left.bottom.right.equalTo(playContentView)
            make.height.equalTo(30.0)
        }
        UIApplication.sharedApplication().statusBarHidden = true
        playButton.setImage(UIImage(named: &quot;pause_icon_vertical&quot;), forState: UIControlState.Normal)
        playButton.setImage(UIImage(named: &quot;play_icon_vertical&quot;), forState: UIControlState.Selected)
        muteButton.setImage(UIImage(named: &quot;sound_on_vertical&quot;), forState: UIControlState.Normal)
        muteButton.setImage(UIImage(named: &quot;sound_off_vertical&quot;), forState: UIControlState.Selected)
        srtsButton.setImage(UIImage(named: &quot;chinese_english_shift_vertical&quot;), forState: UIControlState.Normal)
        srtsButton.setImage(UIImage(named: &quot;english_shift_vertical&quot;), forState: UIControlState.Selected)
        fullButton.setImage(UIImage(named: &quot;full_screen_icon_vertical&quot;), forState: UIControlState.Normal)
        progress.setThumbImage(UIImage(named: &quot;VKScrubber_thumb_vertical&quot;), forState: UIControlState.Normal)

        playButton.snp_remakeConstraints { (make) -&gt; Void in
            make.left.equalTo(10.0)
            make.centerY.equalTo(toolContentView.snp_centerY)
            make.height.width.equalTo(20.0)
        }

        muteButton.snp_remakeConstraints { (make) -&gt; Void in
            make.left.equalTo(playButton.snp_right).offset(13.0)
            make.centerY.equalTo(toolContentView.snp_centerY)
            make.height.width.equalTo(20.0)
        }

        progress.snp_remakeConstraints { (make) -&gt; Void in
            make.left.equalTo(muteButton.snp_right).offset(22.0)
            make.right.equalTo(srtsButton.snp_left).offset(-16.0)
            make.centerY.equalTo(toolContentView.snp_centerY)
            make.height.equalTo(2.0)
        }

        srtsButton.snp_remakeConstraints { (make) -&gt; Void in
            make.right.equalTo(fullButton.snp_left).offset(-14.0)
            make.centerY.equalTo(toolContentView.snp_centerY)
            make.height.width.equalTo(20.0)
        }

        fullButton.snp_remakeConstraints { (make) -&gt; Void in
            make.right.equalTo(-10.0)
            make.centerY.equalTo(toolContentView.snp_centerY)
            make.height.width.equalTo(20.0)
        }
    }
}
</code></pre><p>运行之后截图如下：</p>
<p><img src="/img/iOSLWPlayer/20.png" alt="alt text"></p>
<p>现在只能横屏，还不能返回到竖屏的状态，接下来修改<strong>fullAction(sender: UIButton)</strong>方法，代码如下：</p>
<pre><code>func fullAction(sender: UIButton) {
    if UIDevice.currentDevice().orientation == UIDeviceOrientation.Portrait {
        UIDevice.currentDevice().setValue(NSNumber(integer: UIInterfaceOrientation.LandscapeRight.rawValue), forKey: &quot;orientation&quot;)
        UIViewController.attemptRotationToDeviceOrientation()
    } else {
        UIDevice.currentDevice().setValue(NSNumber(integer: UIInterfaceOrientation.Portrait.rawValue), forKey: &quot;orientation&quot;)
        UIViewController.attemptRotationToDeviceOrientation()
    }
}
</code></pre><h2 id="播放进度"><a href="#播放进度" class="headerlink" title="播放进度"></a>播放进度</h2><p>其实实现播放器进度很简单，如果看了最开始的那些资源的话。几行代码就可以解决了：</p>
<pre><code>func addProgressObserver() {
    let playerItem = player.currentItem!
    player.addPeriodicTimeObserverForInterval(CMTimeMake(1, 1), queue: dispatch_get_main_queue()) { (time: CMTime) -&gt; Void in
        let current = CMTimeGetSeconds(time)
        let total = CMTimeGetSeconds(playerItem.duration)
        let progress = current / total
        self.progress.setValue(Float(progress), animated: true)
    }
}
</code></pre><p>获取当前播放器的播放资源，然后得出总的时间和当前的时间，然后做一个百分比，最后设置<strong>UISlider</strong>的值。这个方法在我之前做进度条的时候就用到了，那里唯一不同的地方就是每秒调用10次，这里是每秒一次，设置<strong>CMTimeMake(1, 1)</strong>为<strong>CMTimeMake(1, 10)</strong>就是每秒调用10次。</p>
<p>然后我们在初始化播放器的方法里面添加调用该方法的代码：</p>
<pre><code>func initPlayer() {
    let url = NSURL(string: videoPath)!
    let playerItem = AVPlayerItem(URL: url)
    player = AVPlayer(playerItem: playerItem)
    addProgressObserver()
}
</code></pre><p>运行之后如下所示:</p>
<p><img src="/img/iOSLWPlayer/21.png" alt="alt text"></p>
<h2 id="拖动进度"><a href="#拖动进度" class="headerlink" title="拖动进度"></a>拖动进度</h2><p>首先我们添加一个属性，如下所示：</p>
<pre><code>var timeObserver: AnyObject!
</code></pre><p>然后修改<strong>addProgressObserver()</strong>方法，如下：</p>
<pre><code>func addProgressObserver() {
    let playerItem = player.currentItem!
    timeObserver = player.addPeriodicTimeObserverForInterval(CMTimeMake(1, 1), queue: dispatch_get_main_queue()) { (time: CMTime) -&gt; Void in
        let current = CMTimeGetSeconds(time)
        let total = CMTimeGetSeconds(playerItem.duration)
        let progress = current / total
        self.progress.setValue(Float(progress), animated: true)
    }
}
</code></pre><p>然后添加一个新的方法：</p>
<pre><code>func removeProgressObserve() {
    player.removeTimeObserver(timeObserver)
}
</code></pre><p>苹果说这两个方法最好成对出现，你Cmd点击这些方法名就能看见苹果给的注释和描述了。</p>
<p>现在我们就来实现主要的逻辑了，但是首先还是要给我们的<strong>UISlider</strong>添加Action，代码如下：</p>
<pre><code>progress.addTarget(self, action: Selector(&quot;updateProgress:&quot;), forControlEvents: UIControlEvents.ValueChanged)
</code></pre><p>然后我们实现<strong>updateProgress(sender: UISlider)</strong>方法，这里就是主要逻辑了，代码如下：</p>
<pre><code>func updateProgress(sender: UISlider) {
    removeProgressObserve()
    let progress = Float64(sender.value)
    let seekTime = CMTimeGetSeconds(player.currentItem!.duration) * progress
    player.seekToTime(CMTimeMakeWithSeconds(seekTime, 1), toleranceBefore: kCMTimeZero, toleranceAfter: kCMTimeZero) { (finished: Bool) -&gt; Void in
        if finished {
            self.addProgressObserver()
        }
    }
}
</code></pre><p>首先我们移除掉进度监视的方法，避免在拖动的时候还在设置进度的值。然后我们算出拖动的值对应的要播放的时间，然后我们就调用<strong>AVPlayer</strong>的方法就可以了，然后在结束的时候再添加进度监视就OK了。经测试，不调用这两个方法也是OK的。</p>
<p>运行后截图如下：</p>
<p><img src="/img/iOSLWPlayer/22.png" alt="alt text"></p>
<p><img src="/img/iOSLWPlayer/23.png" alt="alt text"></p>
<p>第一张图启动后没有点击播放，然后我们拖动进度条，拖动后的效果就是第二张图。这个进度条不太好拖动，如果你是模拟器，用鼠标点击圆点的左上角比较好拖动。</p>
<p>播放器到此就基本完成了，当然功能不够完善，比如音量不能调节，只能静音开关。还剩下一个字幕的功能也没有做，这里就不再继续了。字幕的实现主要难点就是解析字幕文件了，留给大家了，不会就参考<a href="https://github.com/viki-org/VKVideoPlayer" target="_blank" rel="external"> VKVideoPlayer </a>。</p>
<p><a href="https://github.com/LynchWong/LWPlayer" target="_blank" rel="external"> 完整源码 </a>，这里我把图片资源去掉了，不方便贡献给大家，见谅。</p>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/wechat-reward-image.png" alt="Lynch Wong WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/alipay-reward-image.png" alt="Lynch Wong Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/音频/" rel="tag">#音频</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/09/29/iOS播放音频/" rel="next" title="iOS播放音频">
                <i class="fa fa-chevron-left"></i> iOS播放音频
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/10/22/storyboard、xib、AutoLayout实现UILabel自动换行/" rel="prev" title="storyboard、xib、AutoLayout实现UILabel自动换行">
                storyboard、xib、AutoLayout实现UILabel自动换行 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2015/10/14/iOS视频播放/"
     data-title="iOS视频播放"
     data-content=""
     data-url="http://lynchwong.com/2015/10/14/iOS视频播放/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2015/10/14/iOS视频播放/"
           data-title="iOS视频播放" data-url="http://lynchwong.com/2015/10/14/iOS视频播放/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Lynch Wong" />
          <p class="site-author-name" itemprop="name">Lynch Wong</p>
          <p class="site-description motion-element" itemprop="description">I WILL.</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">140</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">48</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/LynchWong" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#建立项目"><span class="nav-number">1.</span> <span class="nav-text">建立项目</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#项目结构"><span class="nav-number">2.</span> <span class="nav-text">项目结构</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#视频资源"><span class="nav-number">3.</span> <span class="nav-text">视频资源</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#播放器"><span class="nav-number">4.</span> <span class="nav-text">播放器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#播放器界面"><span class="nav-number">4.1.</span> <span class="nav-text">播放器界面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#强制横屏"><span class="nav-number">4.2.</span> <span class="nav-text">强制横屏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#播放进度"><span class="nav-number">4.3.</span> <span class="nav-text">播放进度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#拖动进度"><span class="nav-number">4.4.</span> <span class="nav-text">拖动进度</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lynch Wong</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"nobodyknows"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  

</body>
</html>
